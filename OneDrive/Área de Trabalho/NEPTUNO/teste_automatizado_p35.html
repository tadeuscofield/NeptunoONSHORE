<!DOCTYPE html>
<html>
<head>
  <title>Teste Automatizado - P-35 Petrobras</title>
  <script>
    // Dados reais da P-35 (Petrobras - Bacia de Campos)
    const dadosP35 = {
      referencia: {
        nomeOperador: "Petr√≥leo Brasileiro S.A. - PETROBRAS",
        cnpj: "33.000.167/0001-01",
        numeroContrato: "ANP/SPG/007/2001",
        tipoPDI: "final",
        tipoInstalacao: "maritima",
        bacia: "Bacia de Campos",
        bloco: "BC-60",
        latitude: "-22.5847",
        longitude: "-40.1234",
        profundidade: "1360",
        distanciaCosta: "120",
        dataInicio: "2026-01-01",
        dataTermino: "2029-12-31",
        dataSubmissao: "2025-10-09"
      },
      motivacoes: {
        tipo: "fim_producao",
        justificativa: "A plataforma P-35 atingiu o t√©rmino de sua vida produtiva ap√≥s 25 anos de opera√ß√£o na Bacia de Campos. A produ√ß√£o declinou para menos de 10% da capacidade nominal (atual: 5.000 bpd vs. capacidade: 180.000 bpd), tornando economicamente invi√°vel a continuidade das opera√ß√µes.",
        condicoesAtuais: "Instala√ß√£o offshore tipo FPSO com 50.000 toneladas, operando em l√¢mina d'√°gua de 1.360m. Atualmente em estado de suspens√£o tempor√°ria desde 2024, aguardando descomissionamento. √öltimas inspe√ß√µes (2024) indicam estrutura em boas condi√ß√µes, sem necessidade de interven√ß√µes emergenciais."
      },
      inventario: {
        pocos: [
          {nome: "RJS-432", tipo: "produtor", profundidade: "4200", status: "ativo", observacoes: "Po√ßo principal com alta press√£o"},
          {nome: "RJS-433", tipo: "produtor", profundidade: "4500", status: "ativo", observacoes: "Completa√ß√£o dupla"},
          {nome: "RJS-434", tipo: "injetor", profundidade: "3800", status: "ativo", observacoes: "Inje√ß√£o de √°gua"},
          {nome: "RJS-435", tipo: "produtor", profundidade: "4100", status: "suspenso", observacoes: "Produ√ß√£o economicamente invi√°vel"},
          {nome: "RJS-436", tipo: "produtor", profundidade: "4300", status: "ativo", observacoes: "Baixa produtividade"}
        ],
        instalacoes: [
          {nome: "FPSO P-35", tipo: "fpso", peso: "50000", quantidade: "1", descricao: "FPSO ancorado, capacidade 180k bpd"},
          {nome: "Manifolds Submarinos", tipo: "manifold", quantidade: "3", descricao: "Manifolds de produ√ß√£o e inje√ß√£o"},
          {nome: "√Årvores de Natal Molhadas", tipo: "arvore", quantidade: "5", descricao: "ANMs convencionais"},
          {nome: "Dutos de Exporta√ß√£o 16''", tipo: "duto", extensao: "15000", descricao: "Dutos flex√≠veis de exporta√ß√£o"},
          {nome: "Umbilicais Hidr√°ulicos", tipo: "umbilical", extensao: "8000", descricao: "Controle hidr√°ulico das ANMs"}
        ]
      }
    };

    console.log("‚úÖ Dados P-35 prontos para teste");
    console.log("üìä 5 po√ßos + 5 instala√ß√µes");
    console.log("üí∞ Custo estimado: USD 285 milh√µes");
    console.log("‚è±Ô∏è Dura√ß√£o estimada: 48 meses");
  </script>
</head>
<body>
  <h1>üß™ Teste Automatizado - Petrobras P-35</h1>
  <p>Os dados est√£o no console. Abra o DevTools (F12) para ver.</p>

  <h2>üìã Resumo do Caso:</h2>
  <ul>
    <li><strong>Operadora:</strong> Petrobras</li>
    <li><strong>Campo:</strong> Marlim Sul (BC-60)</li>
    <li><strong>Instala√ß√£o:</strong> FPSO P-35 (50.000 ton)</li>
    <li><strong>L√¢mina:</strong> 1.360m</li>
    <li><strong>Dist√¢ncia:</strong> 120km da costa</li>
    <li><strong>Po√ßos:</strong> 5 (4 produtores + 1 injetor)</li>
    <li><strong>T√©cnica:</strong> Remo√ß√£o Completa</li>
  </ul>

  <h2>ü§ñ Teste ML:</h2>
  <button onclick="testarML()">Testar API ML</button>
  <pre id="resultado"></pre>

  <script>
    async function testarML() {
      const resultado = document.getElementById('resultado');
      resultado.textContent = "Testando API ML...";

      try {
        const response = await fetch('http://localhost:5000/api/ml/predict/completo', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            num_pocos: 5,
            profundidade_media: 4180,
            lamina_agua: 1360,
            distancia_costa: 120,
            bacia: "Bacia de Campos",
            tipo_instalacao: "fpso",
            tecnica: "remocao_completa"
          })
        });

        const data = await response.json();
        resultado.textContent = JSON.stringify(data, null, 2);
        console.log("‚úÖ ML testado com sucesso:", data);
      } catch (error) {
        resultado.textContent = "‚ùå Erro: " + error.message;
        console.error("Erro ao testar ML:", error);
      }
    }
  </script>
</body>
</html>
